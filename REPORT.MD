## Part 1. Запуск нескольких docker-контейнеров с использованием docker compose

   Скачиваем **git lfs** `sudo apt install git-lfs`

   В репозитории проекта делаем `git lfs pull`

   Иначе в файлах **maven-wrapper.jar** будут лежать ссылки на репозитории, а не само содержимое **.jar** файла.
   
   Для кадого сервиса пишем **Dockerfile** подобно этому:

   ![dockerfile](screenshots/image1.png)

   Берем за основу один из образов, содержащий все необходимое для сборки проекта. Также надо удалить переменную окружения **MAVEN_CONFIG** внутри контейнера и присвоить ей значение равное " ". Это делаем из за того что внутри образа эта переменная определена для своих нужд и по каким-то причинам конфликтует с переменной необходимой для сборки образа. Далее берем за основу легкий образ, копируем туда полученный **.jar** - файл, определяем переменные окружения. Точкой входа в контейнер является **wait-for-it.sh** скрипт, который проверяет поднят ли контейнер с **postgres** базой данных, и, если поднят, запускает полученный ранее **.jar** - файл.
   ![images_size](screenshots/image3.png)![database_size](screenshots/image4.png)
   Пишем **docker-compose.yaml**:

   ![docker-compose](screenshots/image2.png)

   Указываем цели для сборки образов, прокидываем необходимые порты + добавляем еще один сервис **RabbitMQ**
   ![docker_ps](screenshots/image5.png)
   Скачиваем **Postman**, импортируем файл для тестов:

   ![postman](screenshots/image6.png)

## Part 2. Создание виртуальных машин

   Т.к. **Vagrant** плохо работает с **VirtualBox** из под **WSL** запускать его будем в **Powershell**.

   Делаем `git clone` проекта, доабвляем в **.gitattributes** параметр ***text eol=lf** чтобы окончание строк файлов было в LF-формате(нужно чтобы не сломалась сборка проекта).

   Инициализируем **Vagrant** в корне проекта командой `vagrant init ubuntu/focal64 --box-version 20240821.0.1`, устанавливаем образ **Ubuntu** и его версию.

   Пишем **Vagrantfile**:

   ![vagrantfile](screenshots/image7.png)

   В нем также указываем образ, его версию, наименование провайдера **VirtualBox**, имя машины, её ресуры и имя хоста.

   Указываем **.sh** скрипт который должен быть запущен при запуске машины. (Скрипт копирует исходники проекта, которые **Vagrant** сам закинул на виртуалку, в рабочую директорию)

   ![task2.sh](screenshots/image8.png)

   Запускаем создание машины командой `vagrant up`

   Заходим внутрь командой `vagrant ssh`

   Видим исходникики в папке workdir

   ![src](screenshots/image9.png)

   Останавливаем машину командой `vagrant halt` и уничтожаем её командой `vagrant destroy`

   ![destroy](screenshots/image10.png)